# 倒计时锁屏

一个在 macOS 菜单栏运行的应用程序，提供可配置的倒计时功能，用于自动锁定屏幕。

## 功能特点
- 在顶部菜单栏运行
- 不会在程序坞中显示
- 显示倒计时计时器
- 可自定义倒计时时长
- 一次性模式选项
- 自动锁定屏幕
- 支持多种锁屏方式（系统锁屏/自定义锁屏程序）

## 锁屏功能
### 系统锁屏
- 使用 macOS 原生锁屏功能
- 通过 AppleScript 实现
- 支持密码保护

### 自定义锁屏
- 支持调用外部锁屏程序
- 可配置锁屏程序路径
- 支持自定义锁屏参数
- 灵活配置锁屏触发条件

## 倒计时选项
- 10 秒
- 60 秒（默认）
- 5 分钟
- 15 分钟
- 30 分钟
- 60 分钟

## 使用方法
- 点击菜单栏图标访问选项
- 选择所需的倒计时时间
- 选择后菜单立即关闭
- 倒计时结束时自动锁定屏幕

## 运行模式
- 连续模式：重复默认的 60 秒倒计时
- 一次性模式：使用选择的时长执行一次，然后返回默认设置

## 系统要求
- macOS 11+
- Swift 5.5+

## 故障排除
- 确保您有运行 AppleScript 的权限
- 检查系统睡眠设置
- 如需手动调整屏幕锁定设置

## 常见问题
1. 为什么应用没有显示在菜单栏？
   - 检查应用是否正在运行
   - 确认系统权限设置

2. 倒计时不工作怎么办？
   - 检查系统权限
   - 重启应用
   - 确认系统版本兼容性

3. 如何完全退出应用？
   - 右键点击菜单栏图标
   - 选择"退出"选项

## 开发说明
- 项目使用 Swift 开发
- 使用 AppleScript 实现屏幕锁定功能
- 支持后台运行
- 低资源占用

## 测试说明
### 单元测试
项目包含完整的单元测试套件，测试覆盖以下功能：
- 倒计时功能测试
- 锁屏触发测试
- 配置保存测试
- 用户界面测试

运行测试命令：
```bash
    xcodebuild test -scheme CountdownLockScreen -destination 'platform=macOS'
```

### 手动测试步骤
1. 基本功能测试
   - 启动应用
   - 选择不同倒计时时间
   - 验证倒计时显示
   - 确认锁屏触发

2. 自定义锁屏测试
   - 配置外部锁屏程序
   - 测试锁屏触发
   - 验证锁屏效果

3. 异常情况测试
   - 网络断开情况
   - 系统资源不足
   - 权限问题处理 